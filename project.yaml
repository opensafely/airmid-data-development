version: "3.0"

expectations:
  population_size: 1000

actions:
  non_tpp_participants:
    run: sqlrunner:latest
      --output output/non_tpp_participants/rows.csv
      --dummy-data-file analysis/non_tpp_participants/dummy_rows.csv
      analysis/non_tpp_participants/query.sql
    outputs:
      moderately_sensitive:
        rows: output/non_tpp_participants/rows.csv

  code_system_id:
    run: sqlrunner:latest
      --output output/code_system_id/rows.csv
      --dummy-data-file analysis/code_system_id/dummy_rows.csv
      analysis/code_system_id/query.sql
    outputs:
      moderately_sensitive:
        rows: output/code_system_id/rows.csv

  coded_event_id:
    run: sqlrunner:latest
      --output output/coded_event_id/rows.csv
      --dummy-data-file analysis/coded_event_id/dummy_rows.csv
      analysis/coded_event_id/query.sql
    outputs:
      moderately_sensitive:
        rows: output/coded_event_id/rows.csv

  consultation_date:
    run: sqlrunner:latest
      --output output/consultation_date/rows.csv
      --dummy-data-file analysis/consultation_date/dummy_rows.csv
      analysis/consultation_date/query.sql
    outputs:
      moderately_sensitive:
        rows: output/consultation_date/rows.csv

  patients_by_surveys:
    run: sqlrunner:latest
      --output output/patients_by_surveys/rows.csv
      --dummy-data-file analysis/patients_by_surveys/dummy_rows.csv
      analysis/patients_by_surveys/query.sql
    outputs:
      moderately_sensitive:
        rows: output/patients_by_surveys/rows.csv

  row_response:
    run: sqlrunner:latest
      --output output/row_response/rows.csv
      --dummy-data-file analysis/row_response/dummy_rows.csv
      analysis/row_response/query.sql
    outputs:
      moderately_sensitive:
        rows: output/row_response/rows.csv

  is_consultation_id_fk:
    run: sqlrunner:latest
      --output output/is_consultation_id_fk/rows.csv
      --dummy-data-file analysis/is_consultation_id_fk/dummy_rows.csv
      analysis/is_consultation_id_fk/query.sql
    outputs:
      moderately_sensitive:
        rows: output/is_consultation_id_fk/rows.csv
